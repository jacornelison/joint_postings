<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title> RPS Summary & Calibration Plan — CV,JAC,KL </title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
	<script type="text/x-mathjax-config">
        MathJax.Hub.Config({
              tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <script type="text/javascript"
        src="../mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>

<body>
<!-- Add my custom pager script -->
<script type="text/javascript" src="scripts/pager.js"></script>
<link rel="stylesheet" type="text/css" href="scripts/pager.css">

<header>
    <h1>RPS Summary and Austral Summer 2021/2022 Calibration Plan</h1>

    <time datetime="2021 08 24" class="published updated">
        2021 08 24
    </time> —
    Clara Vergès, James Cornelison & Karsten Look
</header>

<hr>

<p>

    In this posting, we first summarise our previous work, and then propose an RPS calibration plan for the coming austral
    summer, building on the experience we have gained - both in terms of field calibration and data analysis - to optimise
    the measurement campaign and make sure we have the best possible measurements.
<br><br>

</p>

<hr>

<h3>Table of Contents</h3>
<ol type="1">
  <li><a href="#intro">Introduction</a></li>
  <li><a href="#motivation">Motivation</a></li>
    <ol type="1">
      <li><a href="#SOA">State of the Art</a></li>
      <li><a href="#syst">Systematic Errors</a></li>
        <ol type="i">
            <li><a href="#tiltmeter">Tilt Meter High-F Coupling</a>  </li>
            <li><a href="#review#">Review of Mirror/Source Analysis</a></li>
            <li><a href="#beamfits">Beam Fit Residuals</a> </li>
            <li><a href="#residuals">Residuals in Reconstructed RPS Beam Centers</a> </li>
            <li><a href="#repeat">Measurement Repeatability</a> </li>
        </ol>
    </ol>
  <li><a href="#plan">Calibration Plan</a></li>
    <ol type ="1">
        <li><a href="#schedule">Calibration Schedule</a></li>
        <li><a href="#checks">Additional Cross-checks</a></li>
        <ol type="i">
            <li><a href="#angle">RPS Angle Checker</a>  </li>
            <li><a href="#laser">Wire Grid Cross-check</a></li>
        </ol>
    </ol>
</ol>
<ol type="A">
    <li><a href="#app">Appendix</a></li>
    <ol type ="1">
        <li><a href="#refs">References</a></li>
    </ol>
</ol>

<section><h2 id="intro">Introduction</h2>

    RPS (Rotating Polarised Source) observations are used to characterise individual detector properties,
    namely efficiency and polarisation angle. The knowledge of the exact polarisation angle of
    each detector is not necessary for standard B-modes analysis. However, we need to know it with a very
    high precision if we want to be able to constraint isotropic cosmic birefringence, since the global
    polarisation angle of the instrument is degenerate with the cosmic birefrigence angle. While some
    methods have been proposed where the measurement of the instrument polarisation angle is not needed,
    we believe that the precise characterisation of individual detector polarisation angles
    to obtain the global instrument polarisation angle is the best way towards measuring or improving upper limits
    on the cosmic birefringence angle.
    <br><br>

    To do so, we have analysed RPS data taken in 2017 and 2018 to derive individual detector polarisation angles.
    We have developed techniques to constrain these angles with the best possible precision given the data we
    currently have, but the precision of these results could be significantly improved by taking new data.
    <br><br>


</section>

<section><h2 id=motivation>Motivation</h2>
  <h3 id=SOA>State of the Art</h3>

    <figure>
    <table class="results">
        <tr>
            <th>Experiment</th>
            <th>Frequency (GHz)</th>
            <th>$\ell$ range</th>
            <th>$\alpha\pm\text{stat}(\pm\text{sys})$</th>
            <th>Calibration Method</th>
        </tr>
        <tr>
            <td rowspan="2">QUaD</td>
            <td>100</td>
            <td rowspan="2">200-2000</td>
            <td>$-1.89\pm2.24\pm0.5$</td>
            <td rowspan="2">Polarized Source</td>
        </tr>
        <tr>
            <td>150</td>
            <td>$+0.83\pm0.94(\pm0.5)$</td>
        </tr>
        <tr>
            <td>BOOM03</td>
            <td>143</td>
            <td>150-1000</td>
            <td>$-4.3\pm4.1$</td>
            <td>pre-flight polarized source</td>
        </tr>
        <tr>
            <td>ACTPol</td>
            <td>146</td>
            <td>500-2000</td>
            <td>$-0.2\pm0.5(-1.2)$</td>
            <td>"As-Designed"</td>
        </tr>
        <tr>
            <td>WMAP7</td>
            <td>41+61+95</td>
            <td>2-800</td>
            <td>$-1.1\pm1.4(\pm1.5)$</td>
            <td>pre-launch polarized source / Tau A</td>
        </tr>
        <tr>
            <td>BICEP2</td>
            <td>150</td>
            <td>30-300</td>
            <td>$-1\pm0.2(\pm1.5)$</td>
            <td>Dielectric Sheet</td>
        </tr>
        <tr>
            <td rowspan="3">BICEP1</td>
            <td rowspan="3">100+150</td>
            <td rowspan="3">30-300</td>
            <td>$-2.77\pm0.86(\pm1.3)$</td>
            <td>Dielectric Sheet</td>
        </tr>
        <tr>
            <td>$-1.71\pm0.86(\pm1.3)$</td>
            <td>Polarized Source</td>
        </tr>
        <tr>
            <td>$-1.08\pm0.86(\pm1.3)$</td>
            <td>"As-Designed"</td>
        </tr>
        <tr>
            <td>POLARBEAR</td>
            <td>150</td>
            <td>500-2100</td>
            <td>$-1.08\pm0.2(\pm0.5)$</td>
            <td>Tau A</td>
        </tr>
        <tr>
            <td>Planck</td>
            <td>30-353</td>
            <td>100-1500</td>
            <td>$0.35\pm0.05(\pm0.28)$</td>
            <td>pre-flight source / Tau A</td>
        </tr>
        <tr>
            <td>ACTPol</td>
            <td>150</td>
            <td>600-1800</td>
            <td>$-0.07\pm0.09$</td>
            <td>metrology+modeling+planet obs.</td>
        </tr>
        <tr>
            <td>Minami & Komatsu</td>
            <td>30-353</td>
            <td>100-1500</td>
            <td>$0.35\pm0.14$</td>
            <td>Planck Data</td>
        </tr>
    </table>
        <figcaption>
            Uniform cosmic birefringence constraints from CMB experiments ordered chronologically by publication.
        </figcaption>
    </figure>
    <p>
    A majority of this table comes from James's SPIE paper <a href="JAC2020"></a>, but now includes the Minami & Komatsu result <a href="Minami2020"></a>. There are two primary takeaways from the table above. First, the latest two birefringence results from ACTPol and Minami & Komatsu are in tension. Second, both results have statistical precision of $\mathcal{O}(0.1^o)$, but neither report systematic errors so perhaps the first point isn't surprising. Regardless, this provides an important opportunity for us as we can not only aim to report our own competitive birefringence constraints, but also break the tension in either direction.
</p>
    <p>
        When we made our RPS observations in early 2018, we set a total precision goal of the measured per-pair polarization angle, $\phi_{pair}$, of $\sigma_\phi<0.1^o$ which, compared to the most recent reported values from other experiments, is still competitive. In the 2020 SPIE paper, we reported a total relative angle of $\sigma_{\phi_{pair}}$ equivalent to $0.083^o$, but we were still working out the systematics of the absolute angle at the time. As we'll show below, our current best on the absolute value is about an order of magnitude greater, but we believe we can achieve the $\sigma_{\phi_{pair}}<0.1^o$ in absolute terms by applying our lessons-learned to a new dataset which will be taken this 2021/2022 austral summer.
    </p>

  <h3 id=syst>Systematic Errors</h3>

  <p>
    While analysing RPS data, we were confronted to various sources of systematic effects. As we updated the pointing model
    and used a different approach to estimate source and mirror parameters, we have been able to reduce some of these systematic
    uncertainties. We have considered a large number of possible systematic sources and their impact on the final measurement (detector
    polarisation angles), and made a 
    <a href=https://docs.google.com/document/d/1DOEh3FIKXNf_MWC2YDoNQKWCEjYWp-B79q_PvZ6CGsU/edit?usp=sharing>short summary</a>. 
    In most cases, these uncertainties are very small and yield to a limited bias on the polarisation
    angle. However, a few sources of uncertainties dominate our error budget and require further attention -- the two most notable being 
    from RF coupling to the tilt meter which provides real-time tracking of the orientation of the RPS and from propagation of error from moon observations (
    or a lack thereof, rather) which are used to constrain the position/orientation of the mirror in absolute terms.
  </p>


    <h4 id="tiltmeter">Tilt Meter High-F Coupling</h4>

    <p>During the 2017/2018 calibration campaign, the readout of the tilt meter was affected by electrical coupling of the mast lines with the 2-phase/50 pole stepper motor in the rotation stage. Whenever the rotation stage was moved, the tilt readout dropped to some consistently lower, noiser value. When the stage completed its motion the tilt reading increased, but there was a chance that the tilt did not return to the previous level before the stage was moved and instead would settle at some other value. This looks like a discontinuous step in the tilt readout. Thus, the relative tilt from raster-to-raster is unreliable. Further, because the stage was rotated between when the tilt calibration was completed and when the mast was zeroed to do test movements, we cannot guarantee the the absolute tilt of the RPS either.</p>

    <figure>
        <img src="figs/tilt_timestream_annotated.png" width="100%">
        <figcaption>

        </figcaption>
    </figure>

    <p>
        Note that when the stage not commanded for extended periods of time (during fridge cycles for instance), no stepping is seen and a diurnal fluctuation in tilt (likely from the sun) can be measured.
    </p>

    <h5>Pol Angle Relative Calibration</h5>

    <p>The coupling amplitude of the stage while in motion is consistent between movements, so by isolating those moments, we can reacquire a measure of the relative angle fluctuation.</p>

    <figure>
        <img src="figs/tilt_compare_moving_vs_extended_rest.png" width="100%">
        <figcaption>
            Plots of the tilt meter during motor movements in RPS schedules (Top) and during FFBM/fridge cycles (Bottom) as a function of time in UTC. That the tilts are reliably on the same level (weather permitting) confirms that the tilt readout during motor movements allows us to reestablish at least a relative angle calibration.
        </figcaption>
    </figure>

    <p>At the most pessimistic, we can take the min and max deviation from the moving-stage DC offset and call that the upper limit on the systematic uncertainty of the relative calibration. This comes out to $\pm0.09^o$.</p>

    <p>Ideally, this also allows us to directly subtract the relative angle deviations to further long-timescale scattering during the analysis downstream which will get us to less than that, but that feature still needs to be implemented into the analysis.</p>

    <h5>Pol Angle Abs Cal</h5>
    Unfortunately, the amplitude of the DC-offset-while-moving is dependent entirely on the circuitry as it was set up during the RPS campaign, so we can only establish rough upper limits. The maximum recorded offset was $~0.25^o$ and evidence suggests that the DC offset can swing equally in either direction. In the most pessimistic scenario, I calibrated the tilt meter at one extreme and then leveled the mast at the other which gives us an upper limit of $0.5^o$, which easily dominates any other source of systematics.

    <h5>Root Cause and Fixes</h5>
    <p>
        The high-frequency coupling was ultimately caused by a combination of poor shielding of the tiltmeter from the rotaiton stage and improper grounding of the tilt meter signal wires. We've been able to reproduce this phenomenon in the lab to a similar degree as seen at pole and establish a sufficient shielding/grounding scheme such that any interference is subdominant to the tilt meter noise floor ($O(50\text{nV}$).
    </p>
    <!--
    Facts:
    <ul>
        <li>I calibrated the tilt at some DC offset
        <li>I levelled at (likely) some other DC offset. What if that was at the opposite end?
        <li>The offset can either positive or negative WRT moving-source DC offset
        <li>The max offset seen is ~0.25deg WRT moving-source offset
    </ul>
    Assumptions:
    <ul>
        <li>DC offset can go equally pos. or neg. WRT moving-source DC offset
        <li>The DC offset when I levelled compared to when I calibrated was the exact opposite of what I calibrated at.</ul>

    Result:
    The systematic error on the abs cal of the tilt meter is $0.25+0.25\,=\,0.5^o$
   -->

    <h5>Aside: Upper limit on mast swaying</h5>
    <p>If we assume that the diurnal fluctuations in tilt is from heating of the mast's guy wires, then the source position would also be moving as the mast sways throughout the day. Using the same upper limit from the relative calibration ($\pm0.09^o$) we can calculate the apparent change in Azimuth of the source position:</p>

    $$\sigma_{Az} = \tan^{-1}\left(\frac{H_{mast}\tan\left(\sigma_{tilt}\right)}{D_{src}}\right)$$

    <p>Where $H_{mast}$ is the height of the mast from its pivot point (i.e. just the roof of MAPO) and $D_{src}$ is the distance from BICEP3 to the source, which are both known to be $H_{mast}=12\text{m}$ and $D_{src}=195.5\text{m}$. This gives us $\sigma_{Az} = \pm0.005^o$ which is currently subdominant to other systematics.</p>

  <h4 id=review>Quick Review of Mirror/Source Analysis</h4>
  <p>
      RPS measurements for BICEP3 were taken in January 2017 and 2018, with the mirror installed. To derive individual
      detector polarisation angles, it is crucial to build a reliable pointing model that includes the mirror,
      and to know the source and mirror position with respect to the telescope with a very good precision. 
      To determine the position of the mirror and the source, the best way to proceed is to first observe the Moon with
      the mirror on, allowing to determine first the mirror position, and then the source. However, no Moon observations
      with the mirror on were taken in 2018. It is still possible to determine the source and mirror position by using data taken
      in 2017, but the derived positions suffer from higher uncertainties. In our SPIE paper <a href="JAC2020"></a>,
      we presented the results obtained using RPS data taken in January 2018 - polarisation angles and efficiency for
      800 detector pairs. <br><br>

      We have since then re-analysed RPS data with a different method to estimate source and mirror positions.

      In this updated method, we estimate beam parameters in raw mount coordinates (before applying any pointing model), and then
      estimate source and mirror positions. To do so, we minimise the difference between beam coordinates derived from RPS observation
      using the Beam Map Pointing Model (BMPM) that we have updated <a href="JCV2021"></a>, and "canonical" beam parameters 
      from CMB observations. <br><br>
      
      This analysis is summarised in the simplified flow chart in the figure below, and detailed in various postings:
      <ul>
        <li> <a href=http://bicep.rc.fas.harvard.edu/jcornelison/postings/2021mmdd_rps_moon_reanalysis/>
            Mirror parameters in 2017 and 2018</a></li>
        <li><a href= http://bicep.rc.fas.harvard.edu/cverges/20210105_pa_reconstruction/>
            Mirror and source parameters in 2018 - I: Methods and preliminary results</a></li>
        <li> <a href=http://bicep.rc.fas.harvard.edu/cverges/20210604_pa_reconstruction_2/>
            Mirror and source parameters in 2018 - II: Results with updated pointing model & Residuals</a></li>
    </ul>

      <figure>
          <img src="figs/rps_data_flow_chart.png"/>
          <figcaption>
              Simplified analysis flow chart to get source and mirror parameters from RPS data.
          </figcaption>
      </figure>


  Once source and mirror positions are established, we can proceed with the rest of the analysis, using the RPS modulation curve to determine
  individual detectors polarisation angles.

  <h4 id="beamfits">Beam Fit Residuals</h4>
  <p>When fitting for beam parameters in raw mount coordinates, we noticed residuals at the level of 5-10%, as shown below. 
    We tentatively identified it as amplitude dependent noise coming from the demodulation routine, something that also been 
    identified in FFBM measurement campaigns.<br><br>

    <figure>
      <img src="figs/res_channel_2385.png" width="100%">
      <figcaption>
        Amplitude-dependent residuals seen after Gaussian beam fit on RPS observations.
      </figcaption>
  </figure>

  While we are not sure this effect actually comes from demodulation, we know that slower chop rates lead to less noise in 
  demodulated data, because there are more sample to average over for a given chop cycle. However, a higher chop rate allows 
  for more samples of the beam per unit time, and a better background rejection. In 2017, data was taken with a chop rate 
  of 10 GHz and 20 GHz, while in 2018 it was only taken at 20Hz. <br><br>
  We are currently comparing data at 10Hz and 20Hz taken in 2017, to see if we can learn learn anything from having different 
  chop rates, in particular if the lower chop rates effectively reduces the post-beam fit residuals. We are also investigating
  the performance of the various demodulation algorithm that we have available with respect to that amplitude dependant noise. <br><br>

  In any case, as we don't have a lot of good quality data from 2017 and therefore probably can't learn much from that, we plan 
  to take data at various chop rates (likely 10-15-20Hz) for this campaign so that we can better estimate and quantify systematics
  that are associated with various chop rates.

  </p>
    <h4 id="residuals">Residuals in Reconstructed RPS Beam Centers</h4>

    Using the method described above, we estimate the following parameters for the mirror and source:

    <ul>
        <li> mirror height = 1.4592m </li>
        <li> mirror tilt = 44.7743 deg</li>
        <li> mirror roll = 0.1054 deg</li>
        <li> source height = 8.9717m </li>
        <li> source distance = 195.5 m </li>
        <li> source azimuth = -177.5938 deg </li>
    </ul>

    Ideally, once these pointing model parameters have been established, the two sets of beam centers (RPS derived and CMB derived) 
    should be identical. However, we observe a pattern of non-Gaussian residuals (shown in Figure 2.4 below) that we try to 
    characterise and understand. More details can be found in <a href="CV2021"></a>, but we briefly discuss potential sources
    of errors below, and how to address them.

  <figure>
    <img src="figs/residuals_10times_all_dk_roll_tilt_az.png" width="100%">
    <figcaption>
      Typical residual pattern (x10) between RPS-derived and CMB-derived beam centers, in focal plane coordinates.
    </figcaption>
    </figure>
    </p>

  <h5>Deck-dependent parameters</h5>
  <p> 
    RPS data and CMB data are taken at different deck angles --  0/45/90/135 ('RPS angles') vs 23/68/203/248 'CMB angles' -- 
    and CMB data is taken without the mirror on, i.e. the pointing model is different. While this shouldn't have any 
    impact on the beam centers that we derive from RPS data vs from CMB data, we might suffer from various systematic effects. 
    In particular, in our analysis, we observe deck-dependent residuals and show that:

    <ul>
      <li>RPS data at different deck angles yield to different mirror roll angle (up to ~0.03 deg difference)</li>
      <li>For a given RPS data set at one deck angle, using CMB derived beam centers at different deck angles 
        as reference also yields to different mirror roll angle (up to ~0.04 deg difference)</li>
    </ul>

    Based on an initial systematic error propagation, we estimate this to translate into $\sigma_\phi\sim0.05^o$,
    which represents a sizeable portion of our error budget. Therefore, we intend to modify the RPS calibration schedule 
    to either mitigate or better understand this source of systematics. <br><br>

    First, as CMB beam centers are derived without the mirror installed, we plan to use CMB observations with 
    the mirror on (in collaboration with Cyndia), so that we can derive CMB beam centers when the telescope is in a configuration 
    similar to the one used during RPS observations. We also note that the CMB-derived beam centers we have been using (from 2018) 
    might themselves suffer from deck-dependent effects due to gravitational flexture in the star pointing camera,
    as hinted by Justin in <a href="JWB2018"></a>. Although this should now be fixed, we plan to take RPS data at both 
    'RPS angles' and 'CMB angles' to ensure we don't suffer from deck-dependent systematics 
    coming from using different deck angles for RPS and CMB, or at least to estimate the systematic error we get from that. <br><br>

    Finally, in previous calibration campaigns, the RPS was rotating from -180deg to 180 with respect to gravity, whatever
    the deck angle of the instrument was. This setup is convenient because it allows to maximise detector response
    for dk 0/90, however, for dk 45/135, detectors don't reach their peak response at any point in the RPS modulation 
    curve. This can lead to uncertainties in the determination of the beam centers (in raw mount coordinates), 
    that contributes to deck-dependent residuals that we see. We therefore intend to tilt the RPS with respect to the deck angle 
    and not with respect to gravity, so that the modulation curve can be effectively maximal for each deck angle. 
    However, this could induce a new systematic contribution since the RPS orientation would be different for each schedule 
    - we would therefore need to have an estimation of this effect and have planned for appropriate observations in 
    the calibration schedule.
  </p>

  <h5>Mirror-related residuals?</h5>

  <p>
    We also investigated the hypothesis that the residuals could arise from mirror systematics, such as small deformations
    in the mirror. If this was case, we should have residuals that are the same for Moon and RPS observations in 2017 
    (in 2018 we don't have Moon observations to compare to), or residuals that corresponds to a specific position on the mirror
    once the deck angle rotation is corrected. We couldn't detect any mirror-related pattern in deck-dependent residuals, 
    as shown for example in Figure 1.5 below. We have also estimated the mirror differential polarisation to be very small and 
    not a significant source of systematic error, as detailed in <a href="JAC2021"></a>.

    <figure>
      <tr>
          <td><img src="figs/residuals_10times_mirror.png"/></td>
      </tr>
      <figcaption>
          Deck-dependent residuals (x10) projected in mirror coordinates. 
      </figcaption>
  </figure>

  Although this points to no permanent default of the mirror, we could still suffer from time-dependent fluctuations of the mirror,
  in particular due to the weather and/or the position of the Sun. We therefore need to assess the impact of such time-dependent 
  effects on measurement repeatability (see below). We also note that residuals appear correlated with when data was taken -
  detectors within a given raster tend to have residuals that are correlated but seemingly independent to detectors in other rasters. 
  To mitigate this, we plan on running "tight" schedules with quick rrevisit times.
  </p>

  <h5>Moon observations</h5>
  <p>To analyse 2018 data, we use CMB observations as reference beam center because we had no Moon observations to establish mirror
    parameters. As mirror and source parameters are degenerate, this leads to uncertainty in the determination of these
    parameters. The source position (on the mast) has a good year-to-year repeatability so we can use source parameters from 2017
    as priors for the analysis of 2018 data. This is however not sufficient to establish both source and mirror parameters with a good
    precision. For this season, we therefore plan to take both Moon and CMB observations with the mirror on, so that we have two independent
    and complementary way of estimating the source and mirror positions, thus improving the precision on the pointing model parameters.
  </p>

  <h4 id="repeat">Measurement Repeatability</h4>

  <p> In 2018, two RPS data sets were taken at dk 45 - a complete and a partial one. Using only detectors that have measurements
    in the two data sets, we have shown that while measurement repeatablity is overall good, the estimation of the 
    mirror roll parameter changes by ~9% between the two dk 45 data sets <a href="CV2021" ></a>, which translates 
    to $\sigma_\phi\sim0.01^o$. We believe that this variability is likely due to external factors affecting the source and/or 
    mirror position (mast swaying, sun on the mirror, etc.). We therefore incorporate various redundant measurements in the calibration 
    schedule to have an as accurate as possible estimation of the measurement repeatability, so that we can correctly propagate 
    the associated error. In particular we plan to observe at least at one deck angle 3 times:

    <ol>
        <li>first, nominal observation</li>
        <li>repeat same schedule another day at the same time, with similar weather</li>
        <li>repeat again at a different time, in different weather conditions</li>
    </ol>
  </p>

</section>

<section><h2 id=plan>Calibration Plan</h2>


    <h3 id=schedule>Calibration Schedule</h3>

    <p> We propose <a href=https://docs.google.com/spreadsheets/d/10NAoifVl0Y2dxdlx_JSGmlcqxI2pSLf0GLOCBm8ZmdA/edit?usp=sharing>
        a calibration schedule</a> for the austral summer 2021-2022, with an observing strategy
        that takes into accounts the systematic effects we have identified. We have added a number of new and
        (sometimes) redundant observations, in order to minimise systematic effects and maximise data quality.
        We have ranked all the tasks by priority (necessary, medium and low), so that this plan can be adapted/shortened
        depending on available time.
    </p>


    <h3 id=checks>Additional Cross-checks</h3>
    <h4 id=angle>RPS Angle Checker</h4>
    <p>
        We're currently building a simple room-temperature W-band receiver which will serve as a completely independent and redundant check of the RPS's polarization orientation during observations. The plan is to have this receiver placed on the roof of DSL as close as possible to BICEP3 with a line-of-site to the RPS, feeding the receiver output (and possibly tilt/thermometry) to GCP. This data will be analyzed alongside the regular bolometer data with the idea being that the polarization properties of the angle checker (which shall be known <i>a priori</i> to high precision and tracked throughout) would be estimated during every rasterset, allowing us to track the RPS polarization angle throughout all of our observations.
    </p>

    <figure>
        <img src="figs/angle_checker_prototype_annotated.png" width="70%"/>
        <figcaption>
            Diagram of a prototype angle checker. The wire grid is identical to the RPS and calibrated in the same way. The receiver is 'room temperature' and comprises a 25dBi horn, 27dB W-band LNA, and W-band GaAs detector diode. The LNA and diode will be kept thermally stable using a power heater under PID controll via a (probably AD590) thermometer.
        </figcaption>
    </figure>

    <h4 id=laser>Wire Grid Cross-check</h4>
    <p>
    We typically calibrate orientation of the wire grid WRT gravity by first using a knee mill and finderscope to orient the wire grid WRT to one of the sides of the rotation stage and then orient the rotation stage WRT to gravity -- using a precision bubble level on that same side of the stage to zero the tiltmeter. As a quick additional cross check, before installing the BSNS onto the stage, we'll shine a laser through the wire grid which will produce a nice flat, $\sim2\text{mm}$-thick diffraction pattern corresponding to the angle of the wire grid. We will then use a level to level the diffraction pattern WRT to gravity and the commaned angle of the rotation stage is the orientation of the wire grid (+90&deg;).
    </p>

    <figure>
        <img src="figs/laser_test_cropped.jpg">
        <figcaption>
            Basic demonstration of a laser diffracting off of a wire grid (spec'd at $15\mu\text{m}$ wire thickness with $80\mu\text{m}$ spacing). The troughs in the large-scale pattern are consistent with the $524\text{nm}$ laser diffracting around the $15\mu\text{m}$ wires (Babinet's principle). The smaller-scale features are consistent with a diffraction grating with $80\mu\text{m}$ spacing. The vertical thickness of the pattern is $\sim5\text{mm}$ at the center which is consistent with the spot size of the laser and quickly settles at $\sim2\text{mm}$ off-axis.
        </figcaption>
    </figure>

    <p>
        Using this method in the lab, we've been able to get derive the grid horizontal at $\sigma\sim0.1^o$ using a machinist level and height gauge (see figure below). With a little practice and perhaps a longer level, the precision could be comparable or even greater than what we can typically achieve using our mill-calibration method. There are also some other systematics to consider such as grid-laser perpendicularity as well as projection effects at the measuring plane which we're still thinking about. Either way, we've proven that this serves as a quick and easy cross check.
    </p>

    <figure>
        <img src="figs/laser_cal_harvard.jpg">
        <figcaption>
            Functional demonstration of a laser diffraction calibration. We level the RPS using a bubble level and then place the same level in front of the diffraction pattern. We then measure the distance of the bottom of the level to the bottom of the diffraction pattern at each end of the level. When the distances are equal, we know that the wire grid is perpendicular to the level. Our current best measurement repeatability is $\sigma\sim0.1^o$ after an hour or so of tinkering.
        </figcaption>
    </figure>
    <p>

    </p>
    <p>For reference, I got this laser-through-grid idea from Ronaldo D&uuml;nner and his group in Chile who are testing drone-based polarization calibrators <a href="Dunner2020" target="_blank">IPMU talk</a>.
    </p>
    
</section>

<hr>

<section class="appendix">
    <h2 id="app">Appendix</h2>
<h3 id="refs">References</h3>

<p id="references"></p>

<script type="text/javascript">

    // This my way of making shorthand links.
    // We'll make a couple arrays with the 'tag' and href information
    // and then look through each anchor element for the specified tag.
    // The anchors should then just look like: <a href="tagname"></a>
    // and the script will automatically fill in the hyperlings and text.

    var posting_dir = window.location.href; // What's the current url?

    var bkurl = "bicep.rc.fas.harvard.edu";
    var spurl = "bicep.usap.gov";

    // These are the possible places to find postings
    // The strings are for if you post your posting in that directory.
    var sitemap = {
        jcornelison: "../../../",   // /jcornelison/postings/
        cverges: "../../",          // /cverges/
        bkcmb : "../../../../",     // /bkcmb/analysis_logbook/analysis/
        bicep3: "../../../",        // /bicep3/analysis_logbook/
        bicep_array: "../../../",   //
        bicep2: "",                 // We shouldn't be posting in these, but still have postings.
        keck  : "",                 // keck/analysis_logbook/analysis/
        spuder: "",                 // ~spuder/hieno_analysis_logboo
        bicep1: "",                 // ~bicep1/analysis_logbook_north/
    };
    // Logbook Site map:
    // personal:www/jcornelison/postings/
    // bkcmb:   www/bkcmb/analysis_logbook/analysis/
    // keck:    www/keck/analysis_logbook/analysis/
    // BICEP3:  www/bicep3/analysis_logbook/
    // BA:      www/bicep_array/analysis_logbook/
    // We shouldn't be posting in these, but still have postings.
    // bicep2:
    // keck:    www/keck/analysis_logbook/analysis/
    // spuder:  www/~spuder/hieno_analysis_logbook/
    // bicep1:  www/~bicep1/analysis_logbook_north/

    // Shorthand tags
    var tags = [
        "JWB2018",
        "Minami2020",
        "Dunner2020",
        "JAC2020",
        "JCV2021",
        "CV2021",
        "JAC2021",
    ];

    // Links
    // Truncate the link down to the www directory in which is lies if you can.
    var hrefs = [
        "bkcmb/analysis_logbook/analysis/20181207_B2018_beamcen/",
        "https://arxiv.org/pdf/2011.11254.pdf",
        "https://www.youtube.com/watch?v=7FA274kr5-s&list=PLmXdKmtgaCcFHtNZkjhPWa6oPuPcugHDg&index=50&ab_channel=SeminarKavliIPMU",
        "https://arxiv.org/pdf/2012.05934.pdf",
        "bkcmb/analysis_logbook/analysis/20210518_bmpm/",
        "cverges/20210604_pa_reconstruction_2/",
        "jcornelison/postings/2019mmdd_rps_reflection_polarization/"
    ];


    // Posting titles
    var desc = [
        "B2016, B2017, and B2018 CMB-derived beam center correlations",
        "New Extraction of the Cosmic Birefringence from the Planck 2018 Polarization Data",
        "Drone-Based Polarization Calibration Source for MM-Wave Telescopes",
        "Polarization Calibration of the BICEP3 CMB polarimeter at the South Pole",
        "A New Pointing Model for Beam Mapping",
        "Polarisation angle reconstruction II: mirror/source parameters",
        "Systematics from Differential Reflection of Polarization from the FFFlat",
    ];
    // Debug
    var posty = document.getElementById("testp");


    var preface = "";
    var keys = Object.keys(sitemap);
    // If we're not at pole or bicep, just post the full URL
    // If we are, go back to the www directory.
    if (posting_dir.match(new RegExp(bkurl))!=bkurl &
        posting_dir.match(new RegExp(spurl))!=spurl){
        preface = "http://" + bkurl+"/";
    }
    else {
        for (key in keys){
            if (posting_dir.match(new RegExp("/"+keys[key]+"/"))=="/"+keys[key]+"/"){
                preface = sitemap[keys[key]];
            };
        };

    };

    // Add the prefixes we can.
    // Only add prefixes to directories in the sitemap so we don't break
    // external references.
    for (ref in hrefs) {
        for (key in keys) {

            // If there's a match, at the prefix and move on.
            if(hrefs[ref].match(new RegExp(keys[key] + "/"))==keys[key]+"/"){
                hrefs[ref] = preface+hrefs[ref];
                break;
            }
        };
    };

    // posty.innerHTML = preface;

    // Make a list of references
    var post = document.getElementById("references");
    var msg = "<table>";
    for (var tag in tags){
        msg = msg + "<tr><td><a href="+tags[tag]+"></a></td><td> - </td><td>"+desc[tag]+"</td>";
    };
    msg = msg+ "</table>";
    post.innerHTML = msg;

    // Look through all the hyperlinks and insert the proper links to the postings
    var links = document.getElementsByTagName("A");
    for (var link in links){
        for (var tag in tags){
            if (links[link].href.endsWith(tags[tag])){
                links[link].text = "("+tags[tag]+")";
                links[link].href = hrefs[tag];
                links[link].target = "_blank";
            }
        }
    }

</script>
   </section>
<hr>



</body>
